INFO:__main__:üîç Enhanced detailed logging enabled - output: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/logs/debug/run_complete_fba_system_20250717_193351.log
DEBUG:asyncio:Using selector: EpollSelector
INFO:__main__:üöÄ Complete FBA System v3 initialized
INFO:__main__:üè≠ Processing supplier: poundwholesale-co-uk
INFO:__main__:üîó URL: https://poundwholesale.co.uk
INFO:__main__:üìß Email: info@theblacksmithmarket.com
INFO:__main__:üñ•Ô∏è Headed mode: True
INFO:__main__:üì¶ Max products: 5
INFO:__main__:üîÑ Force regenerate: False
INFO:__main__:üì¶ Archiving expected output files for verification...
INFO:__main__:Archive mode set to: ''
WARNING:__main__:Unknown archive mode: ''. Skipping archive.
INFO:tools.supplier_guard:üõ°Ô∏è Supplier Guard initialized
INFO:__main__:‚ö†Ô∏è Supplier poundwholesale-co-uk not ready: .supplier_ready file is 8 days old (max 7 days)
INFO:__main__:‚úÖ Existing supplier package found for poundwholesale-co-uk. Bypassing script generation.
INFO:__main__:üöÄ Initializing centralized browser session...
INFO:utils.browser_manager:üîß BrowserManager singleton initialized
INFO:utils.browser_manager:üîå Connecting to persistent Chrome on debug port 9222
INFO:utils.browser_manager:üìÑ Using existing context with 1 pages
INFO:utils.browser_manager:‚úÖ Connected to persistent Chrome successfully
INFO:utils.browser_manager:‚ôªÔ∏è Reusing existing page in context.
INFO:utils.browser_manager:üìÑ Navigating to https://poundwholesale.co.uk
INFO:utils.browser_manager:‚úÖ Page ready for https://poundwholesale.co.uk
INFO:__main__:üîê Performing dynamic supplier authentication...
INFO:__main__:üì¶ Loading dynamic supplier login script: suppliers/poundwholesale-co-uk/scripts/poundwholesale-co-uk_login.py
INFO:poundwholesale-co-uk_login:üîê Starting login to https://www.poundwholesale.co.uk/
INFO:poundwholesale-co-uk_login:‚úÖ Already logged in
INFO:__main__:‚úÖ Dynamic supplier authentication successful. Proceeding with authenticated workflow.
INFO:utils.path_manager:Creating run output directory for supplier 'poundwholesale-co-uk' -> 'poundwholesale-co-uk/20250717_153358_run'
DEBUG:utils.path_manager:Successfully created run output directory: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/poundwholesale-co-uk/20250717_153358_run
INFO:__main__:üìÅ Run output directory: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/poundwholesale-co-uk/20250717_153358_run
INFO:__main__:üîÑ Using standard workflow (LangGraph integration disabled)
INFO:__main__:üîÑ Starting passive extraction workflow...
INFO:__main__:‚úÖ Loaded system configuration from /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/config/system_config.json
INFO:__main__:‚úÖ OpenAI client initialized for AI features
INFO:amazon_playwright_extractor:AI features disabled in amazon_playwright_extractor - using only traditional selectors.
INFO:amazon_playwright_extractor:Output directory set to: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/CACHE/amazon_data
WARNING:amazon_playwright_extractor:‚ö†Ô∏è BrowserManager not available, using legacy browser connection
INFO:configurable_supplier_scraper:‚úÖ Loaded system configuration from /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/config/system_config.json
INFO:configurable_supplier_scraper:üîß ConfigurableSupplierScraper will use centralized BrowserManager
DEBUG:configurable_supplier_scraper:AI model from config: gpt-4.1-mini-2025-04-14
DEBUG:configurable_supplier_scraper:Extraction targets from config: {}
DEBUG:configurable_supplier_scraper:Discovery assistance from config: {}
INFO:configurable_supplier_scraper:[CONFIG] Initialized with AI model: gpt-4.1-mini-2025-04-14
INFO:configurable_supplier_scraper:[TARGET] Extraction targets loaded: []
INFO:configurable_supplier_scraper:[ASSIST] Discovery assistance enabled: False
DEBUG:PassiveExtractionWorkflow:üîç DEBUG: linking_map initialized as type: <class 'list'>
INFO:PassiveExtractionWorkflow:‚úÖ Output directory set to: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS
INFO:PassiveExtractionWorkflow:‚úÖ Initialization validation passed - all critical attributes verified
INFO:__main__:üîß Workflow configured: force_ai_scraping=True, linking_batch=1, financial_batch=1, ai_client=enabled
INFO:PassiveExtractionWorkflow:--- Starting Passive Extraction Workflow for: poundwholesale-co-uk ---
INFO:PassiveExtractionWorkflow:Session ID: poundwholesale-co-uk_20250717_193358
INFO:PassiveExtractionWorkflow:üìä CONFIGURATION VALUES:
INFO:PassiveExtractionWorkflow:   max_products_to_process: 5
INFO:PassiveExtractionWorkflow:   max_products_per_category: 1
INFO:PassiveExtractionWorkflow:   max_analyzed_products: 4
INFO:PassiveExtractionWorkflow:   max_products_per_cycle: 100
INFO:PassiveExtractionWorkflow:   supplier_extraction_batch_size: 1
INFO:PassiveExtractionWorkflow:   max_categories_per_request: 5
INFO:utils.enhanced_state_manager:No existing state file found for poundwholesale-co-uk, starting fresh
INFO:PassiveExtractionWorkflow:üìã Loaded existing processing state for poundwholesale-co-uk
INFO:PassiveExtractionWorkflow:üîÑ Resuming from index 0
INFO:PassiveExtractionWorkflow:‚úÖ No previous progress found, starting fresh.
INFO:PassiveExtractionWorkflow:‚úÖ No existing linking map found at /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale-co-uk/linking_map.json - Creating new map
DEBUG:PassiveExtractionWorkflow:üîç DEBUG: linking_map loaded as type: <class 'list'>, length: 0
INFO:PassiveExtractionWorkflow:‚úÖ No existing linking map found at /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale-co-uk/linking_map.json - Creating new map
INFO:PassiveExtractionWorkflow:STANDARD MODE: Using AI-based hierarchical category selection.
INFO:tools.passive_extraction_workflow_latest:üß† No AI cache file found for poundwholesale-co-uk - starting fresh
ERROR:PassiveExtractionWorkflow:Unexpected error occurred during workflow execution: 'PassiveExtractionWorkflow' object has no attribute 'web_scraper'
Traceback (most recent call last):
  File "/mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/tools/passive_extraction_workflow_latest.py", line 1091, in run
    category_urls_to_scrape = await self._hierarchical_category_selection(self.workflow_config.get('supplier_url'), self.supplier_name)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/tools/passive_extraction_workflow_latest.py", line 2406, in _hierarchical_category_selection
    discovered_categories = await self.web_scraper.discover_categories(supplier_url)
                                  ^^^^^^^^^^^^^^^^
AttributeError: 'PassiveExtractionWorkflow' object has no attribute 'web_scraper'
WARNING:__main__:‚ö†Ô∏è Workflow completed but no results returned
ERROR:__main__:‚ùå Extraction workflow failed
INFO:__main__:üîç Verifying files generated despite extraction failure...
INFO:__main__:‚úÖ Verified suppliers/poundwholesale-co-uk/config/login_config.json: 39 bytes, 2025-07-09T01:21:55.800343
INFO:__main__:‚úÖ Verified suppliers/poundwholesale-co-uk/scripts/poundwholesale-co-uk_login.py: 20178 bytes, 2025-07-09T01:21:55.814416
ERROR:__main__:‚ùå Missing expected file: OUTPUTS/FBA_ANALYSIS/cached_products.json
ERROR:__main__:‚ùå Missing expected file: OUTPUTS/FBA_ANALYSIS/ai_category_cache.json
ERROR:__main__:‚ùå Missing expected file: OUTPUTS/FBA_ANALYSIS/linking_maps/linking_map.json
ERROR:__main__:‚ùå Output verification FAILED - 7 issues found
ERROR:__main__:  ‚Ä¢ suppliers/poundwholesale-co-uk/config/login_config.json: File is old (8 days, 18:12:02.387007) - may not be from recent test
ERROR:__main__:  ‚Ä¢ suppliers/poundwholesale-co-uk/config/login_config.json: Missing vision_discovered field
ERROR:__main__:  ‚Ä¢ suppliers/poundwholesale-co-uk/config/login_config.json: Missing auto_discovered field
ERROR:__main__:  ‚Ä¢ suppliers/poundwholesale-co-uk/scripts/poundwholesale-co-uk_login.py: File is old (8 days, 18:12:02.399315) - may not be from recent test
ERROR:__main__:  ‚Ä¢ OUTPUTS/FBA_ANALYSIS/cached_products.json: File does not exist
ERROR:__main__:  ‚Ä¢ OUTPUTS/FBA_ANALYSIS/ai_category_cache.json: File does not exist
ERROR:__main__:  ‚Ä¢ OUTPUTS/FBA_ANALYSIS/linking_maps/linking_map.json: File does not exist
INFO:utils.browser_manager:üßπ Performing global cleanup...
INFO:utils.browser_manager:üßπ Starting browser cleanup...
INFO:utils.browser_manager:üîå Disconnecting from persistent Chrome instance (keeping browser running)
INFO:utils.browser_manager:üé≠ Stopped Playwright instance (browser remains running)
INFO:utils.browser_manager:‚úÖ Disconnected from persistent browser (Chrome debug port remains active)
INFO:utils.browser_manager:üîå Persistent Chrome browser should remain running on debug port 9222
INFO:__main__:üßπ Browser cleanup completed
WARNING:utils.browser_manager:Error during global cleanup: no running event loop
