2025-07-19 09:57:42,588 - utils.logger - INFO - üîß Logging initialised ‚Äì log file: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/logs/debug/run_custom_poundwholesale_20250719_095742.log
2025-07-19 09:57:42,589 - __main__ - INFO - üìã Debug log file: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/logs/debug/run_custom_poundwholesale_20250719_095742.log
2025-07-19 09:57:42,589 - __main__ - DEBUG - Debug logging initialized - full system execution details will be captured
2025-07-19 09:57:42,598 - utils.browser_manager - INFO - üîß BrowserManager singleton initialized
2025-07-19 09:57:42,974 - utils.browser_manager - INFO - üîå Connecting to persistent Chrome on debug port 9222
2025-07-19 09:57:43,522 - utils.browser_manager - INFO - üìÑ Using existing context with 5 pages
2025-07-19 09:57:43,523 - utils.browser_manager - INFO - ‚úÖ Connected to persistent Chrome successfully
2025-07-19 09:57:43,523 - utils.browser_manager - INFO - ‚ôªÔ∏è Reusing existing page in context.
2025-07-19 09:57:43,524 - __main__ - INFO - üîê Initializing authentication service for logout detection...
2025-07-19 09:57:43,531 - __main__ - INFO - ‚úÖ Using hardcoded credentials for poundwholesale.co.uk
2025-07-19 09:57:43,531 - __main__ - INFO - üåê Connecting to existing Chrome debug port 9222 for authentication...
2025-07-19 09:57:49,152 - tools.supplier_authentication_service - INFO - ‚úÖ Authentication indicator found: 'logout'
2025-07-19 09:57:49,230 - tools.supplier_authentication_service - INFO - ‚úÖ Logout link found - user is authenticated
2025-07-19 09:57:49,231 - tools.supplier_authentication_service - INFO - ‚úÖ Session already authenticated - skipping login
2025-07-19 09:57:49,236 - amazon_playwright_extractor - INFO - AI features disabled in amazon_playwright_extractor - using only traditional selectors.
2025-07-19 09:57:49,238 - amazon_playwright_extractor - INFO - Output directory set to: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/CACHE/amazon_data
2025-07-19 09:57:49,239 - amazon_playwright_extractor - WARNING - ‚ö†Ô∏è BrowserManager not available, using legacy browser connection
2025-07-19 09:57:49,243 - configurable_supplier_scraper - INFO - ‚úÖ Loaded system configuration from /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/config/system_config.json
2025-07-19 09:57:49,245 - configurable_supplier_scraper - INFO - üîß ConfigurableSupplierScraper will use centralized BrowserManager
2025-07-19 09:57:49,245 - configurable_supplier_scraper - DEBUG - AI model from config: gpt-4.1-mini-2025-04-14
2025-07-19 09:57:49,246 - configurable_supplier_scraper - DEBUG - Extraction targets from config: {}
2025-07-19 09:57:49,246 - configurable_supplier_scraper - DEBUG - Discovery assistance from config: {}
2025-07-19 09:57:49,246 - configurable_supplier_scraper - INFO - [CONFIG] Initialized with AI model: gpt-4.1-mini-2025-04-14
2025-07-19 09:57:49,247 - configurable_supplier_scraper - INFO - [TARGET] Extraction targets loaded: []
2025-07-19 09:57:49,248 - configurable_supplier_scraper - INFO - [ASSIST] Discovery assistance enabled: False
2025-07-19 09:57:49,248 - PassiveExtractionWorkflow - DEBUG - üîç DEBUG: linking_map initialized as type: <class 'list'>
2025-07-19 09:57:49,249 - PassiveExtractionWorkflow - INFO - ‚úÖ Output directory set to: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS
2025-07-19 09:57:49,249 - PassiveExtractionWorkflow - INFO - ‚úÖ Initialization validation passed - all critical attributes verified
2025-07-19 09:57:49,249 - PassiveExtractionWorkflow - INFO - --- Starting Passive Extraction Workflow for: poundwholesale.co.uk ---
2025-07-19 09:57:49,250 - PassiveExtractionWorkflow - INFO - Session ID: poundwholesale.co.uk_20250719_095749
2025-07-19 09:57:49,251 - PassiveExtractionWorkflow - INFO - üìä CONFIGURATION VALUES:
2025-07-19 09:57:49,251 - PassiveExtractionWorkflow - INFO -    max_products_to_process: 15
2025-07-19 09:57:49,252 - PassiveExtractionWorkflow - INFO -    max_products_per_category: 3
2025-07-19 09:57:49,252 - PassiveExtractionWorkflow - INFO -    max_analyzed_products: 10
2025-07-19 09:57:49,253 - PassiveExtractionWorkflow - INFO -    max_products_per_cycle: 100
2025-07-19 09:57:49,254 - PassiveExtractionWorkflow - INFO -    supplier_extraction_batch_size: 1
2025-07-19 09:57:49,255 - PassiveExtractionWorkflow - INFO -    max_categories_per_request: 5
2025-07-19 09:57:49,264 - utils.enhanced_state_manager - INFO - Loaded state for poundwholesale.co.uk - resuming from index 3
2025-07-19 09:57:49,264 - PassiveExtractionWorkflow - INFO - üìã Loaded existing processing state for poundwholesale.co.uk
2025-07-19 09:57:49,265 - PassiveExtractionWorkflow - INFO - üîÑ Resuming from index 3
2025-07-19 09:57:49,282 - PassiveExtractionWorkflow - INFO - ‚úÖ Loaded linking map (array format) from /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale.co.uk/linking_map.json with 3 entries
2025-07-19 09:57:49,283 - PassiveExtractionWorkflow - DEBUG - üîç DEBUG: linking_map loaded as type: <class 'list'>, length: 3
2025-07-19 09:57:49,294 - PassiveExtractionWorkflow - INFO - ‚úÖ Processing state initialized and started
2025-07-19 09:57:49,298 - PassiveExtractionWorkflow - INFO - ‚úÖ Loaded linking map (array format) from /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale.co.uk/linking_map.json with 3 entries
2025-07-19 09:57:49,299 - PassiveExtractionWorkflow - INFO - CUSTOM MODE: Using predefined category list.
2025-07-19 09:57:49,299 - tools.passive_extraction_workflow_latest - INFO - Attempting to load predefined categories for poundwholesale.co.uk
2025-07-19 09:57:49,307 - tools.passive_extraction_workflow_latest - INFO - ‚úÖ Successfully loaded 276 predefined category URLs from /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/config/poundwholesale_categories.json
2025-07-19 09:57:49,309 - PassiveExtractionWorkflow - INFO - üîÑ HYBRID PROCESSING MODE: Enabled
2025-07-19 09:57:49,310 - PassiveExtractionWorkflow - INFO - üîÑ HYBRID PROCESSING: Mode configuration loaded
2025-07-19 09:57:49,311 - PassiveExtractionWorkflow - INFO -    switch_to_amazon_after_categories: 1
2025-07-19 09:57:49,311 - PassiveExtractionWorkflow - INFO - üîÑ HYBRID MODE: Sequential processing (extract all, then analyze all)
2025-07-19 09:57:49,321 - PassiveExtractionWorkflow - INFO - üîÑ SKIPPING SUPPLIER SCRAPING: Found fresh cached products (age: 0.6h) with processing progress (index: 3)
2025-07-19 09:57:49,323 - PassiveExtractionWorkflow - INFO - üìã Loading products from cache: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/cached_products/poundwholesale-co-uk_products_cache.json
2025-07-19 09:57:49,332 - PassiveExtractionWorkflow - INFO - ‚úÖ Loaded 2 cached products from /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/cached_products/poundwholesale-co-uk_products_cache.json
2025-07-19 09:57:49,333 - PassiveExtractionWorkflow - INFO - üîç Analyzing 2 products in batch mode
2025-07-19 09:57:49,333 - PassiveExtractionWorkflow - INFO - üîÑ Processing analysis batch 1/1 (2 products)
2025-07-19 09:57:49,334 - PassiveExtractionWorkflow - INFO - üîç Analyzing product 1: 'Marksman A2 Self-Healing Cutting Mat 60 X 45cm'
2025-07-19 09:57:49,334 - PassiveExtractionWorkflow - INFO - Product already processed: https://www.poundwholesale.co.uk/marksman-a2-self-healing-cutting-mat-60-x-45cm. Skipping.
2025-07-19 09:57:49,335 - PassiveExtractionWorkflow - INFO - üîç Analyzing product 2: 'Marksman Plasterboard & Drywall Tape 48mm X 20m'
2025-07-19 09:57:49,335 - PassiveExtractionWorkflow - INFO - Product already processed: https://www.poundwholesale.co.uk/marksman-plasterboard-drywall-tape-48mm-x-20m. Skipping.
2025-07-19 09:57:49,336 - PassiveExtractionWorkflow - INFO - üîç DEBUG: _save_linking_map called with 3 entries for supplier poundwholesale.co.uk
2025-07-19 09:57:49,336 - PassiveExtractionWorkflow - INFO - üîç DEBUG: linking_map type: <class 'list'>, entries: 3, sample: {'supplier_ean': '5038673685205', 'amazon_asin': 'B07N12QZXP', 'supplier_title': 'Marksman A2 Self-Healing Cutting Mat 60 X 45cm', 'amazon_title': 'Elan', 'supplier_price': 5.08, 'amazon_price': None, 'match_method': 'EAN_cached', 'confidence': 'low', 'created_at': '2025-07-19T09:20:43.407597', 'supplier_url': 'https://www.poundwholesale.co.uk/marksman-a2-self-...'}
2025-07-19 09:57:49,337 - PassiveExtractionWorkflow - INFO - üîç DEBUG: Target file path: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale.co.uk/linking_map.json
2025-07-19 09:57:49,338 - PassiveExtractionWorkflow - INFO - ‚úÖ Directory created: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale.co.uk
2025-07-19 09:57:49,339 - PassiveExtractionWorkflow - INFO - üîç DEBUG: Temporary file path: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale.co.uk/linking_map.json.tmp
2025-07-19 09:57:49,339 - PassiveExtractionWorkflow - INFO - üîç DEBUG: Writing linking map data to temporary file...
2025-07-19 09:57:49,344 - PassiveExtractionWorkflow - INFO - ‚úÖ Temporary file written successfully: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale.co.uk/linking_map.json.tmp
2025-07-19 09:57:49,344 - PassiveExtractionWorkflow - INFO - üîç DEBUG: Moving temporary file to final location...
2025-07-19 09:57:49,348 - PassiveExtractionWorkflow - INFO - ‚úÖ Successfully saved linking map with 3 entries to /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale.co.uk/linking_map.json
2025-07-19 09:57:49,351 - PassiveExtractionWorkflow - INFO - ‚úÖ VERIFICATION: File exists at /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/linking_maps/poundwholesale.co.uk/linking_map.json with size 1449 bytes
2025-07-19 09:57:49,351 - PassiveExtractionWorkflow - INFO - ‚úÖ Hybrid mode: Linking map save completed
2025-07-19 09:57:49,352 - PassiveExtractionWorkflow - INFO - üîç DEBUG: _save_final_report called with 0 profitable results
2025-07-19 09:57:49,352 - PassiveExtractionWorkflow - INFO - üìä Calling FBA_Financial_calculator.run_calculations to generate CSV financial report...
2025-07-19 09:57:49,363 - FBA_Financial_calculator - INFO - FBA_Financial_calculator: amazon_dir confirmed to exist and is a directory: /mnt/c/Users/chris/Desktop/Amazon-FBA-Agent-System-v32/OUTPUTS/FBA_ANALYSIS/amazon_cache
2025-07-19 09:57:49,401 - PassiveExtractionWorkflow - INFO - ‚úÖ Financial report CSV generation completed successfully
2025-07-19 09:57:49,402 - PassiveExtractionWorkflow - INFO - ‚úÖ Hybrid mode: Final report save completed
2025-07-19 09:57:49,411 - PassiveExtractionWorkflow - INFO - --- Hybrid Processing Mode Finished ---
2025-07-19 09:57:49,411 - __main__ - INFO - üåê Keeping browser persistent for next run - not closing browser
2025-07-19 09:57:49,412 - utils.browser_manager - WARNING - Error during global cleanup: no running event loop
